plugins {
  alias(deps.plugins.android.library)
  alias(deps.plugins.kotlin.android)
  alias(deps.plugins.publish)
  alias(deps.plugins.dokka)
}

android {
  namespace 'app.cash.sqldelight.paging3'
  compileSdkVersion 23
}

archivesBaseName = 'sqldelight-androidx-paging3'

dependencies {
  // workaround for https://youtrack.jetbrains.com/issue/KT-27059
  api "${project.property("GROUP")}:runtime-jvm:${project.property("VERSION_NAME")}"
  api deps.androidx.paging3.common

  testImplementation project(':drivers:sqlite-driver')
  testImplementation deps.androidx.paging3.runtime
  testImplementation deps.androidx.recyclerView
  testImplementation deps.truth
  testImplementation deps.kotlin.test.junit
  testImplementation deps.kotlin.coroutines.test
}

// workaround for https://youtrack.jetbrains.com/issue/KT-27059
configurations.all {
  resolutionStrategy.dependencySubstitution {
    substitute module("${project.property("GROUP")}:runtime-jvm:${project.property("VERSION_NAME")}") with project(':runtime')
  }
}

apply from: rootProject.file('gradle/gradle-mvn-push.gradle')
