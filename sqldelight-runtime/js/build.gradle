apply plugin: 'org.jetbrains.kotlin.platform.js'

archivesBaseName = 'sqldelight-runtime'

sourceSets {
  main.kotlin.srcDirs += '../src/jsMain/kotlin'
  test.kotlin.srcDirs += '../src/jsTest/kotlin'
}

dependencies {
  expectedBy project(':sqldelight-runtime:common')
  implementation deps.kotlin.stdlib.js

  testImplementation deps.kotlin.test.js
}

compileKotlin2Js {
  kotlinOptions.moduleKind = 'umd'
  kotlinOptions.sourceMap = true
  kotlinOptions.metaInfo = true
}

compileTestKotlin2Js {
  kotlinOptions.moduleKind = 'commonjs'
  kotlinOptions.sourceMap = true
}

apply from: "$rootDir/gradle/gradle-mvn-push.gradle"
