plugins {
  alias(deps.plugins.publish)
  alias(deps.plugins.dokka)
  id("app.cash.sqldelight.multiplatform")
}

// https://youtrack.jetbrains.com/issue/KTIJ-14471
sourceSets {
  main
}

kotlin {
  js()

  sourceSets {
    commonMain {
      dependencies {
        api project(":runtime:shared")
        implementation project(":runtime:internal")
      }
    }
    commonTest {
      dependencies {
        implementation deps.kotlin.test.common
        implementation deps.kotlin.test.commonAnnotations
        implementation deps.kotlin.coroutines.test
      }
    }
    jvmTest {
      dependencies {
        implementation deps.kotlin.test.junit
        implementation deps.stately.collections
      }
    }
    jsTest {
      dependencies {
        implementation deps.kotlin.test.js
      }
    }
    nativeMain {
      dependencies {
        implementation deps.stately.concurrency
      }
    }
    nativeTest{
      dependencies {
        implementation deps.stately.collections
      }
    }
  }
}

apply from: "$rootDir/gradle/gradle-mvn-push.gradle"
